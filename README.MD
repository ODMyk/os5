# System Call API. Hooks & Event Handlers.

–¶–µ–π –ø—Ä–æ—î–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –Ω–∏–∑—å–∫–æ—Ä—ñ–≤–Ω–µ–≤–∏—Ö –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π —è–¥—Ä–∞ Linux –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ –ø–∞–º‚Äô—è—Ç—ñ —ñ–Ω—à–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É —Ç–∞ –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–Ω–æ–≥–æ –≤–≤–æ–¥—É —á–µ—Ä–µ–∑ `/proc/[pid]/mem` —ñ `/dev/input/event*`.

## üîß –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

### üì¶ 1. –°–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–∞ –ø–∞–º‚Äô—è—Ç—Ç—é —ñ–Ω—à–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É

- `writer.cpp`: –ø—Ä–æ—Ü–µ—Å-–¥–∂–µ—Ä–µ–ª–æ, —è–∫–∏–π –∑–∞–ø–∏—Å—É—î –∑–Ω–∞—á–µ–Ω–Ω—è —É –∑–º—ñ–Ω–Ω—É.
- `reader.cpp`: –ø—Ä–æ—Ü–µ—Å-—Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—á, —è–∫–∏–π —á–∏—Ç–∞—î —Ü—é –∑–º—ñ–Ω–Ω—É –Ω–∞–ø—Ä—è–º—É —á–µ—Ä–µ–∑ `/proc/[pid]/mem`.

### üéπ 2. –ü–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–Ω–æ–≥–æ –≤–≤–æ–¥—É

- `keyboard_hook.cpp`: —á–∏—Ç–∞—î –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –∫–ª–∞–≤—ñ—à —ñ–∑ `/dev/input/eventX` —Ç–∞ –≤–∏–≤–æ–¥–∏—Ç—å –∫–æ–¥–∏ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏—Ö –∫–ª–∞–≤—ñ—à —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```bash
os5/
‚îú‚îÄ‚îÄ reader.cpp           # –ü—Ä–æ—Ü–µ—Å-—Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—á
‚îú‚îÄ‚îÄ writer.cpp           # –ü—Ä–æ—Ü–µ—Å-–¥–∂–µ—Ä–µ–ª–æ
‚îú‚îÄ‚îÄ keyboard_hook.cpp    # –ü–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–Ω–æ–≥–æ –≤–≤–æ–¥—É
‚îú‚îÄ‚îÄ Makefile             # –§–∞–π–ª –¥–ª—è –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó
‚îú‚îÄ‚îÄ dist/                # –ö–∞—Ç–∞–ª–æ–≥ –¥–ª—è –∑—ñ–±—Ä–∞–Ω–∏—Ö –≤–∏–∫–æ–Ω—É–≤–∞–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ (–∑ º—è–≤–ª—è—î—Ç—å—Å—è –ø—ñ—Å–ª—è –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó)
‚îî‚îÄ‚îÄ README.md            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

### Ubuntu / Debian / Linux Mint

```bash
sudo apt update
sudo apt install -y build-essential g++ cmake make libudev-dev
```

### Arch / Manjaro

```bash
sudo pacman -Syu --noconfirm
sudo pacman -S --noconfirm base-devel gcc cmake make libudev0-shim
```

### Fedora

```bash
sudo dnf install -y @development-tools gcc-c++ cmake make systemd-devel
```

## ‚öôÔ∏è –ö–æ–º–ø—ñ–ª—è—Ü—ñ—è

–£ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `Makefile`, —â–æ –¥–æ–∑–≤–æ–ª—è—î –∑—Ä—É—á–Ω–æ –∫–æ–º–ø—ñ–ª—é–≤–∞—Ç–∏ –±—É–¥—å-—è–∫—É –∑ –≤–µ—Ä—Å—ñ–π:

```bash
make                    # –ö–æ–º–ø—ñ–ª—é—î –æ–¥—Ä–∞–∑—É –≤—Å—ñ 3 —Ñ–∞–π–ª–∏
make reader             # –ö–æ–º–ø—ñ–ª—é—î src/reader.cpp -> dist/reader
make writer             # –ö–æ–º–ø—ñ–ª—é—î src/writer.cpp -> dist/writer
make keyboard_hook      # –ö–æ–º–ø—ñ–ª—é—î src/keyboard_hook.cpp -> dist/keyboard_hook
```

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

### 1. –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∑–º—ñ–Ω —É –ø–∞–º'—è—Ç—ñ

#### –ö—Ä–æ–∫ 1. –£ –ø–µ—Ä—à–æ–º—É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ:

```bash
./writer
```

#### –ö—Ä–æ–∫ 2. –£ –¥—Ä—É–≥–æ–º—É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ:

```bash
sudo ./reader <PID_–ø–µ—Ä—à–æ–≥–æ_–ø—Ä–æ—Ü–µ—Å—É>
```

–î–µ PID ‚Äî —Ü–µ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –ø—Ä–æ—Ü–µ—Å—É writer, –¥–ª—è –∑—Ä—É—á–Ω–æ—Å—Ç—ñ –≤—ñ–Ω –æ–¥—Ä–∞–∑—É –≤–∏–≤–æ–¥–∏—Ç—å—Å—è —É –∫–æ–Ω—Å–æ–ª—å

### 2. –ü–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏

```bash
sudo ./keyboard_hook
```

–î–∞–ª—ñ –¥–æ–≤—ñ–ª—å–Ω–µ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è —É –¥–æ–≤—ñ–ª—å–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å—ñ (–≤—ñ–∫–Ω—ñ) –±—É–¥–µ —Ñ—ñ–∫—Å—É–≤–∞—Ç–∏—Å—è. –ú–æ–∂–µ –≤–∏–Ω–∏–∫–Ω—É—Ç–∏ –±–∞–≥, —è–∫—â–æ –ø—ñ–¥ º—î–¥–Ω–∞–Ω–æ –¥–µ–∫—ñ–ª—å–∫–∞ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä - –ø—Ä–æ–≥—Ä–∞–º–∞ —Å–ª—ñ–¥–∫—É—î –∑–∞ –ø–µ—Ä—à–æ—é, —è–∫—É –∑–Ω–∞–π—à–ª–∞

## üì§ –†–µ–∑—É–ª—å—Ç–∞—Ç

–§–∞–π–ª `keyboard.log` –∑'—è–≤–∏—Ç—å—Å—è —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É –ø—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É keyboard_hook.

## ü™™ License

–¶–µ–π –ø—Ä–æ—î–∫—Ç –ª—ñ—Ü–µ–Ω–∑–æ–≤–∞–Ω–æ –∑–∞ —É–º–æ–≤–∞–º–∏ MIT License.
